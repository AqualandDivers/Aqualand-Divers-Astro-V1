---
import Button from "@components/Button/Button.astro";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

interface Props {
	TE: CollectionEntry<"TE">;
	direction: "horizontal" | "vertical";
	noTransitions?: boolean;
	main?: boolean;
}


const { TE, direction, noTransitions = false, main = false } = Astro.props as Props;
const { title, description, header } = TE.data;
---

<div
	class:list={[
		"grid gap-4",
		{
			"md:grid-cols-[2fr_1fr]": direction === "horizontal",
		},
	]}
>
	<a href={`/trips&events/${TE.id}`} class="aspect-square overflow-hidden">
		{
			noTransitions && (
				<Image
					src={header}
					alt={title}
					loading="eager"
					width={450}
					densities={[1.5, 2, 3]}
					class="h-auto w-full min-w-full object-cover"
				/>
			)
		}
		{
			!noTransitions && (
				<Image
					src={header}
					alt={title}
					loading="eager"
					width={450}
					densities={[1.5, 2, 3]}
					class="h-auto w-full min-w-full object-cover"
					transition:name={`portfolio-image-${TE.id}`}
				/>
			)
		}
	</a>
	<div class="flex flex-col justify-between gap-2">
		{
			!main && (
				<div>
					<h3 class="h3 text-primary-500 tracking-widest">{title}</h3>
					<p class="mt-4 lg:text-lg">{description}</p>
				</div>
				<div class="flex">
					<Button variant="ghost" arrow="right" href={`/trips&events/${TE.id}`} class="pl-0">
						View More
					</Button>
				</div>
			)
		}
		{
			main && (
				<div>
					<h1 class="h1 text-primary-500 tracking-widest font-normal">{title}</h1>
					<p class="mt-4 lg:text-lg wrap-anywhere">{description}</p>
				</div>
				<div class="flex">
					<Button variant="ghost" arrow="right" href={`/trips&events/${TE.id}`} class="pl-0">
						View More
					</Button>
				</div>
			)
		}
	</div>
</div>
